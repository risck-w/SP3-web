(this["webpackJsonpreact-admin_client"]=this["webpackJsonpreact-admin_client"]||[]).push([[0],{303:function(e,t,a){e.exports=a(408)},315:function(e,t,a){},316:function(e,t,a){},392:function(e,t,a){},395:function(e,t,a){},397:function(e,t,a){},398:function(e,t,a){},408:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(72),l=a.n(s),o=a(216),i=a(78),c=(a(211),a(142)),m=(a(290),a(133)),h=(a(271),a(208)),u=(a(257),a(170)),d=(a(258),a(143)),p=(a(315),a(316),a(411),a(298)),E=(a(412),a(299)),g=(a(272),a(157));const{SubMenu:y}=g.a,w=r.a.createElement(g.a,null,r.a.createElement(g.a.Item,null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"#"},"\u8bbe\u7f6e")),r.a.createElement(g.a.Item,null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"#"},"\u4e2a\u4eba\u4e2d\u5fc3")),r.a.createElement(g.a.Divider,null),r.a.createElement(g.a.Item,null,r.a.createElement("a",{target:"_self",rel:"noopener noreferrer",href:"logout"},"\u9000\u51fa")));class S extends n.Component{constructor(){super(...arguments),this.state={current:"1"},this.handleClick=e=>{this.setState({current:e.key})}}render(){return r.a.createElement(p.a,{overlay:w,placement:"bottomRight"},r.a.createElement("a",{className:"ant-dropdown-link",style:{float:"right",margin:"0 10% 0 010%"},onClick:e=>e.preventDefault()},r.a.createElement(E.a,{style:{backgroundColor:"#87d068"},icon:"user"})," \xa0",r.a.createElement(u.a,{type:"down"})))}}class b extends n.Component{render(){return r.a.createElement("header",{className:"login-header"},r.a.createElement("h1",{style:{float:"left"}},"Spcloud"),r.a.createElement(S,null))}}var f=a(264),v=a.n(f);function x(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";return new Promise((n,r)=>{let s;s="GET"===a?v.a.get(e,{params:t}):v.a.post(e,t),s.then(e=>{n(e.data)}).catch(e=>{d.b.error("\u8bf7\u6c42\u51fa\u9519\u4e86\uff1a "+e.message)})})}const k=e=>x("/craw",e,"GET");var C=a(256),N=a.n(C);var _={saveUser(e){N.a.set("user_key",e)},getUser:()=>N.a.get("user_key")||{},removeUser(){N.a.remove("user_key")}};class W extends n.Component{constructor(){super(...arguments),this.handleSubmit=e=>{e.preventDefault(),this.props.form.validateFields(async(e,t)=>{if(e)console.log("\u68c0\u9a8c\u5931\u8d25");else{const{username:e,password:a}=t,n=await((e,t)=>x("user/login",{username:e,password:t},"POST"))(e,a);0===n.status?(d.b.success("\u767b\u5f55\u6210\u529f"),_.saveUser(n),this.props.history.replace("/")):d.b.error(n.message)}})},this.validatorPwd=(e,t,a)=>{t?t.length<8?a("\u5bc6\u7801\u957f\u5ea6\u4e0d\u80fd\u5c0f\u4e8e8\u4f4d"):t.length>16?a("\u5bc6\u7801\u957f\u5ea6\u4e0d\u80fd\u5927\u4e8e16\u4f4d"):/^[a-zA-Z0-9_]+$/.test(t)||a("\u7528\u6237\u540d\u5fc5\u987b\u662f\u82f1\u6587\u3001\u6570\u5b57\u6216\u4e0b\u5212\u7ebf\u7ec4\u6210"):a("\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a!"),a()}}render(){const e=_.getUser();if(e&&e._id)return r.a.createElement(i.a,{to:"/"});const{getFieldDecorator:t}=this.props.form;return r.a.createElement("div",{className:"login"},r.a.createElement(b,null),r.a.createElement("section",{className:"login-content"},r.a.createElement("h2",null,"\u7528\u6237\u767b\u5f55"),r.a.createElement(m.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement(m.a.Item,null,t("username",{rules:[{required:!0,whitespace:!0,message:"\u7528\u6237\u540d\u5fc5\u987b\u8f93\u5165"},{min:4,message:"\u7528\u6237\u540d\u81f3\u5c114\u4f4d"},{max:12,message:"\u7528\u6237\u540d\u6700\u591a12\u4f4d"},{pattern:/^[a-zA-Z0-9_]+$/,message:"\u7528\u6237\u540d\u5fc5\u987b\u662f\u82f1\u6587\u3001\u6570\u5b57\u6216\u4e0b\u5212\u7ebf\u7ec4\u6210"}]})(r.a.createElement(h.a,{prefix:r.a.createElement(u.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u7528\u6237\u540d"}))),r.a.createElement(m.a.Item,null,t("password",{rules:[{validator:this.validatorPwd}]})(r.a.createElement(h.a,{prefix:r.a.createElement(u.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u5bc6\u7801"}))),r.a.createElement(m.a.Item,null,r.a.createElement(c.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"\u767b\u5f55")))))}}var T=m.a.create()(W),I=(a(383),a(300)),D=(a(283),a(245)),A=(a(284),a(167)),H=(a(387),a(210)),M=(a(389),a(267)),P=(a(285),a(188));a(392);function U(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var a=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?a:3&a|8).toString(16)}))}var G=U,F=(a(410),a(297)),O=(a(395),a(294)),z=a.n(O);class R extends n.Component{constructor(e){super(e),this.onChange=e=>{e-1!==this.state.pageNumber&&this.setState({pageNumber:e-1})},this.state={uuid:G(),hotNews:[],pageNumber:0}}UNSAFE_componentWillReceiveProps(e){this.state.uuid!==e.id&&this.setState({uuid:e.id,hotNews:e.hotNews})}render(){return r.a.createElement("div",null,this.state.hotNews.length>0&&z.a.chunk(this.state.hotNews,10)[this.state.pageNumber].map((e,t)=>r.a.createElement("div",{key:t,className:"c-container"},r.a.createElement("a",{href:e.req_url},e.req_url),r.a.createElement("h3",null,r.a.createElement("a",{href:e.url,className:"t"},e.title)),"\u6765\u6e90\uff1a",e.res_name,"  \u66f4\u65b0\u65f6\u95f4\uff1a",e.updated_dt)),r.a.createElement(F.a,{showQuickJumper:!0,pageSize:10,defaultCurrent:1,total:this.state.hotNews.length,onChange:this.onChange,hideOnSinglePage:!0}),r.a.createElement("br",null))}}a(397);class q extends n.Component{constructor(e){super(e),this.state={ai_content:""}}UNSAFE_componentWillReceiveProps(e){this.setState({ai_content:e.ai_content})}render(){const[e,t]=Object(n.useState)(2),[a,s]=Object(n.useState)(!1);return r.a.createElement("div",null,r.a.createElement("div",{className:"c-container"},r.a.createElement("text",null,this.state.ai_content)))}}a(398);const{CheckableTag:j}=D.a;class J extends n.Component{constructor(e){super(e),this.key="updatable",this.handleChange=async e=>{let t=null;if(!this.state.showMsg&&e){const e=this.state.news,a={url:e.url,parseType:e.pdt_type,search:1},n=await k(a);t=0===n.status?"\u300a"+this.state.tagname+"\u300b\u52a0\u5165\u722c\u53d6\u961f\u5217\u6210\u529f, \u6b63\u5728\u722c\u53d6...":"\u300a"+this.state.tagname+"\u300b"+n.message,P.a.open({key:this.key,message:"\u6d88\u606f\u901a\u77e5",description:t,duration:1.5})}this.setState({checked:e})},this.state={checked:!1,tagname:e.tagname,news:e.news,showMsg:!1}}render(){return r.a.createElement(j,Object.assign({},this.props,{checked:this.state.checked,onChange:this.handleChange}))}}a(409);var B=a(296);class L extends n.Component{constructor(e){super(e),this.state={wordCloud:[]},this.timer(),setInterval(this.timer.bind(this),1e5)}getWordCloud(){return new Promise(async(e,t)=>{try{e(await x("/wordCloud",null,"GET"))}catch(a){t(a)}})}shouldComponentUpdate(e,t){return t!==this.state}timer(){this.getWordCloud().then(e=>{e&&this.setState({wordCloud:e.wordCloud})})}wordCloudOption(){return{backgroundColor:"rgba(21, 20, 13, 0)",tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},series:[{type:"wordCloud",gridSize:1,sizeRange:[12,55],rotationRange:[-45,0,45,90],layoutAnimation:!0,textStyle:{normal:{color:function(){return"rgb("+Math.round(255*Math.random())+", "+Math.round(255*Math.random())+", "+Math.round(255*Math.random())+")"}}},left:"center",top:"center",right:null,bottom:null,width:"90%",height:"110%",data:this.state.wordCloud}]}}render(){return r.a.createElement("div",null,r.a.createElement(B.a,{option:this.wordCloudOption(),theme:"ThemeStyle"}))}}class Z extends n.Component{constructor(e){super(e),this.enterLoading=async()=>{let e=null;this.setState({loading:!0}),this.state.hotWebSite.map(async t=>{try{const a={url:t.url,parseType:t.pdt_type,search:1};0===(await k(a)).status&&(e="\u300a"+t.name+"\u300b\u52a0\u5165\u722c\u53d6\u961f\u5217\u6210\u529f, \u6b63\u5728\u722c\u53d6...",P.a.open({key:this.key,message:"\u6d88\u606f\u901a\u77e5",description:e,duration:3}))}catch(a){d.b.error(a)}}),this.setState({loading:!1})},this.handleSubmit=e=>{e.preventDefault(),this.props.form.validateFields(async(e,t)=>{if(!e)try{const e=await k(t);0===e.code&&e.data&&e.data.length>0?this.setState({uuid:G(),hotNews:e.data,isShowEmpty:!1}):this.setState({isShowEmpty:!0,emptyDescription:"\u672a\u68c0\u7d22\u5230\u76f8\u5e94\u7684\u6570\u636e"});const n=await(a=t,x("/AIAgentSearch",a,"GET"));0===n.code&&n.message&&n.message.length>0?this.setState({ai_content:n.message,isShowEmpty:!1}):this.setState({isShowEmpty:!0,emptyDescription:"AI\u672a\u68c0\u7d22\u5230\u76f8\u5e94\u7684\u6570\u636e"})}catch(e){d.b.error(e)}var a})},this.state={isShowRank:!1,rankData:null,isShowHotWebSite:!1,hotWebSite:null,isShowTopHotWebSite:!1,topHotWebSite:null,formInput:null,checked:!0,hotNews:{},uuid:null,loading:!1,isShowEmpty:!0,emptyDescription:null,ai_content:null}}componentDidMount(){new Promise(async(e,t)=>{try{e(await x("/hotWebSite",null,"GET"))}catch(a){t(a)}}).then(e=>{e&&this.setState({isShowHotWebSite:!0,hotWebSite:e.hotWebSite})}),new Promise(async(e,t)=>{try{e(await x("/topHotWebSite",null,"GET"))}catch(a){t(a)}}).then(e=>{e&&this.setState({isShowTopHotWebSite:!0,topHotWebSite:e.topHotWebSite})})}render(){const e=_.getUser();if(!e||!e.token)return r.a.createElement(i.a,{to:"/login"});const{getFieldDecorator:t}=this.props.form;return r.a.createElement("div",{className:"container"},r.a.createElement(b,null),r.a.createElement("div",{className:"sp3-container"},r.a.createElement(M.a,null),r.a.createElement("div",{className:"sp3-con-form"},r.a.createElement("div",null,r.a.createElement(m.a,{onSubmit:this.handleSubmit},r.a.createElement(m.a.Item,null,t("url",{valuePropName:"checked",rules:[{required:!0,message:"\u68c0\u7d22\u8bcd\u4e0d\u80fd\u4e3a\u7a7a"}]})(r.a.createElement(h.a,{className:"sp3-form-input",placeholder:"\u5b9e\u65f6\u70ed\u70b9\u641c\u7d22"})),r.a.createElement(c.a,{type:"primary",htmlType:"submit"},"\u641c\u7d22")),r.a.createElement(m.a.Item,null,t("parseType",{initialValue:"AIcontent"})(r.a.createElement(H.a.Group,{className:"sp3-radio"},r.a.createElement(H.a,{value:"AIcontent"},"AI"),r.a.createElement(H.a,{value:"news",color:"white"},"\u65b0\u95fb"),r.a.createElement(H.a,{value:"website"},"\u7f51\u7ad9")))))),r.a.createElement("div",{id:"AI_content_left"},r.a.createElement(q,{ai_content:this.state.ai_content})),r.a.createElement("div",{id:"content_left"},this.state.isShowEmpty&&r.a.createElement(A.a,{description:this.state.emptyDescription}),this.state.isShowEmpty&&this.state.emptyDescription&&null!==this.state.uuid&&"\u5386\u53f2\u65b0\u95fb",r.a.createElement(R,{id:this.state.uuid,hotNews:this.state.hotNews}))),r.a.createElement("div",{className:"sp3-container-rank"},r.a.createElement("h4",{style:{marginBottom:16,color:"#fff"}},"\u65b0\u95fb\u7f51\u7ad9:"),r.a.createElement("div",{className:""},this.state.isShowHotWebSite&&this.state.hotWebSite.map((e,t)=>r.a.createElement(J,{key:t,tagname:e.name,news:e},e.name))),this.state.isShowHotWebSite&&r.a.createElement(c.a,{type:"primary",size:"small",loading:this.state.loading,onClick:this.enterLoading,block:!0},"\u4e00\u952e\u6dfb\u52a0"),r.a.createElement("h4",{style:{margin:"16px 0",color:"#fff"}},"\u70ed\u70b9\u7f51\u7ad9:"),r.a.createElement("div",null,this.state.isShowTopHotWebSite&&this.state.topHotWebSite.map((e,t)=>r.a.createElement(D.a,{key:t,color:e.color},e.name))),r.a.createElement("h4",{style:{margin:"16px 0"}},"\u70ed\u70b9\u8bcd\u6c47:  ",r.a.createElement(I.a,{count:0,dot:!0},r.a.createElement(u.a,{type:"notification"}))),r.a.createElement(L,null))),r.a.createElement("footer",null,r.a.createElement(M.a,null),r.a.createElement("h5",null,"@sp3\u7248\u6743\u6240\u6709")))}}var $=m.a.create()(Z);class Q extends n.Component{render(){return r.a.createElement(o.a,null,r.a.createElement(i.d,null," ",r.a.createElement(i.b,{path:"/login",component:T}),r.a.createElement(i.b,{path:"/",component:$})))}}l.a.render(r.a.createElement(Q,null),document.getElementById("root"))}},[[303,1,2]]]);
//# sourceMappingURL=main.2b09f965.chunk.js.map